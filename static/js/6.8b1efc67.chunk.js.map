{"version":3,"sources":["hoc/withAuthRedirect.tsx","components/dialogs/dialogs.module.css","components/dialogs/dialogItem/dialogItem.tsx","components/dialogs/message/message.tsx","components/dialogs/dialogs.tsx","components/dialogs/dialogsContainer.tsx"],"names":["mapStateForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","DialogItem","name","id","url","className","style","dialog","active","src","alt","width","height","Message","userPhoto","useSelector","profilePage","profile","photos","small","useState","likes","setLikes","dislikes","setDislikes","action","setAction","actions","key","title","onClick","createElement","LikeFilled","LikeOutlined","DislikeFilled","DislikeOutlined","author","avatar","userPhotos","content","message","maxLength30","maxLengthCreator","AddMessageFormRedux","reduxForm","form","onSubmit","handleSubmit","Item","Field","placeholder","component","Textarea","validate","required","Dialogs","addMess","dialogsPage","dialogsElements","dialogs","map","messagesElements","messages","dialogItems","formData","newMessageBody","compose","dispatch","value","addMessAC"],"mappings":"0NAQMA,EAAsB,SAACC,GAAD,MAAwD,CAChFC,OAAQD,EAAME,KAAKD,SAGVE,EAAmB,SAACC,GAAoB,IAE3CC,EAF0C,uKAIxC,OAAKC,KAAKC,MAAMN,OAGT,kBAACG,EAAcE,KAAKC,OAFhB,kBAAC,IAAD,CAAUC,GAAI,eALe,GAEhBC,IAAML,WAUtC,OADiCM,YAA4DX,EAAoB,GAAhFW,CAAoFL,K,oBCtBzHM,EAAOC,QAAU,CAAC,QAAU,yBAAyB,YAAc,6BAA6B,OAAS,wBAAwB,OAAS,wBAAwB,SAAW,0BAA0B,QAAU,2B,+FCSpMC,EAAa,SAACN,GAA2B,IAC3CO,EAAiBP,EAAjBO,KAAMC,EAAWR,EAAXQ,GAAIC,EAAOT,EAAPS,IACjB,OACI,yBAAKC,UAAWC,IAAMC,OAAS,IAAMD,IAAME,QACvC,yBAAKC,IAAKL,EAAKM,IAAI,aAAaC,MAAO,GAAIC,OAAQ,KACnD,kBAAC,IAAD,CAAShB,GAAE,mBAAcO,IAAOD,K,kGCJ/BW,EAAU,SAAClB,GACpB,IAAMmB,EAAYC,aAA+B,SAAA3B,GAAK,uBAAIA,EAAM4B,YAAYC,eAAtB,aAAI,EAA2BC,OAAOC,SADjD,EAGjBC,mBAAiB,GAHA,mBAGpCC,EAHoC,KAG7BC,EAH6B,OAIXF,mBAAiB,GAJN,mBAIpCG,EAJoC,KAI1BC,EAJ0B,OAKfJ,mBAAwB,MALT,mBAKpCK,EALoC,KAK5BC,EAL4B,KAmBrCC,EAAU,CACZ,kBAAC,IAAD,CAASC,IAAI,qBAAqBC,MAAM,QAC1C,0BAAMC,QAdK,WACTR,EAAS,GACTE,EAAY,GACZE,EAAU,WAYTK,wBAAyB,UAAXN,EAAqBO,IAAaC,KAC/C,0BAAM5B,UAAU,kBAAkBgB,KAGpC,kBAAC,IAAD,CAASO,IAAI,wBAAwBC,MAAM,WAC7C,0BAAMC,QAdQ,WACZR,EAAS,GACTE,EAAY,GACZE,EAAU,cAYT7B,IAAMkC,cAAyB,aAAXN,EAAwBS,IAAgBC,KAC3D,0BAAM9B,UAAU,kBAAkBkB,KAGpC,0BAAMK,IAAI,0BAAV,aAIJ,OAGI,kBAAC,IAAD,CACID,QAASA,EACTS,OAAQ,uCACRC,OACIvB,EAAY,kBAAC,IAAD,CAAQL,IAAKK,IAAe,kBAAC,IAAD,CAAQL,IAAK6B,MAEzDC,QACI,2BACK5C,EAAM6C,Y,4CCnCrBC,EAAcC,YAAiB,IA+C/BC,EAAsBC,YAAwB,CAACC,KAAM,wBAA/BD,EAb6C,SAACjD,GACtE,OACI,0BAAMmD,SAAUnD,EAAMoD,cAClB,kBAAC,IAAKC,KAAN,KACI,kBAACC,EAAA,EAAD,CAAO/C,KAAM,iBAAkBgD,YAAa,oBAAqBC,UAAWC,IACrEC,SAAU,CAACC,IAAUb,MAGhC,mDAOGc,EA/CC,SAAC5D,GAAsB,IAC5B6D,EAAwB7D,EAAxB6D,QAASC,EAAe9D,EAAf8D,YAEZC,EAAkBD,EAAYE,QAAQC,KAAI,gBAAE1D,EAAF,EAAEA,KAAMC,EAAR,EAAQA,GAAIC,EAAZ,EAAYA,IAAZ,OAAqB,kBAAC,EAAD,CAAYF,KAAMA,EAAMC,GAAIA,EAAIyB,IAAKzB,EACzBC,IAAKA,OAChFyD,EAAmBJ,EAAYK,SAASF,KAAI,gBAAEzD,EAAF,EAAEA,GAAIqC,EAAN,EAAMA,QAAN,OAAmB,kBAAC,EAAD,CAASA,QAASA,EAASZ,IAAKzB,OAMnG,OACI,yBAAKE,UAAWC,IAAMqD,SAClB,yBAAKtD,UAAWC,IAAMyD,aAEdL,GAGR,yBAAKrD,UAAWC,IAAMwD,UAEdD,EAEJ,kBAAClB,EAAD,CAAqBG,SAfhB,SAACkB,GACdR,EAAQQ,EAASC,sB,iBCAVC,sBACXpE,aAlBkB,SAACV,GACnB,MAAO,CACHqE,YAAarE,EAAMqE,gBAGF,SAACU,GACtB,MAAO,CACHX,QAAS,SAACY,GACND,EAASxC,IAAQ0C,UAAUD,SAWnC7E,IAFW2E,CAGbX","file":"static/js/6.8b1efc67.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {AppRootState} from \"../redux/redux-store\";\r\nimport {connect} from \"react-redux\";\r\n\r\ntype MapStateForRedirectPropsType = {\r\n    isAuth: boolean;\r\n}\r\nconst mapStateForRedirect = (state: AppRootState): MapStateForRedirectPropsType => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\nexport const withAuthRedirect = (Component: any) => {\r\n\r\n    class RedirectComponent extends React.Component<any> {\r\n        render() {\r\n            if (!this.props.isAuth) {\r\n                return <Redirect to={'/login'}/>\r\n            }\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n\r\n    let connectedRedirectComponent = connect<MapStateForRedirectPropsType, {}, {}, AppRootState>(mapStateForRedirect,{})(RedirectComponent);\r\n    return connectedRedirectComponent;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"dialogs_dialogs__3xkII\",\"dialogItems\":\"dialogs_dialogItems__2ZXmT\",\"active\":\"dialogs_active__2SkgZ\",\"dialog\":\"dialogs_dialog__kY9kn\",\"messages\":\"dialogs_messages__3XOI-\",\"message\":\"dialogs_message__28e75\"};","import style from \"../dialogs.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport React from \"react\";\r\n\r\n export type DialogItemType = {\r\n    name: string,\r\n    id: string\r\n    url:string\r\n}\r\n\r\nexport const DialogItem = (props: DialogItemType) => {\r\n    const {name, id, url} = props;\r\n    return (\r\n        <div className={style.dialog + ' ' + style.active}>\r\n            <img src={url} alt=\"userAvatar\" width={40} height={40}/>\r\n            <NavLink to={`/dialogs/${id}`}>{name}</NavLink>\r\n        </div>\r\n    );\r\n}","import React, {createElement, useState} from 'react';\r\nimport {Avatar, Comment, Tooltip} from 'antd';\r\nimport {DislikeFilled, DislikeOutlined, LikeFilled, LikeOutlined} from '@ant-design/icons';\r\nimport userPhotos from '../../../assets/images/green.png';\r\nimport {useSelector} from 'react-redux';\r\nimport {AppRootState} from '../../../redux/redux-store';\r\n\r\ntype MessageType = {\r\n    message: string\r\n}\r\n\r\nexport const Message = (props: MessageType) => {\r\n    const userPhoto = useSelector<AppRootState, any>(state => state.profilePage.profile?.photos.small);\r\n\r\n    const [likes, setLikes] = useState<number>(0);\r\n    const [dislikes, setDislikes] = useState<number>(0);\r\n    const [action, setAction] = useState<null | string>(null);\r\n\r\n    const like = () => {\r\n        setLikes(1);\r\n        setDislikes(0);\r\n        setAction('liked');\r\n    };\r\n\r\n    const dislike = () => {\r\n        setLikes(0);\r\n        setDislikes(1);\r\n        setAction('disliked');\r\n    };\r\n\r\n    const actions = [\r\n        <Tooltip key=\"comment-basic-like\" title=\"Like\">\r\n      <span onClick={like}>\r\n        {createElement(action === 'liked' ? LikeFilled : LikeOutlined)}\r\n          <span className=\"comment-action\">{likes}</span>\r\n      </span>\r\n        </Tooltip>,\r\n        <Tooltip key=\"comment-basic-dislike\" title=\"Dislike\">\r\n      <span onClick={dislike}>\r\n        {React.createElement(action === 'disliked' ? DislikeFilled : DislikeOutlined)}\r\n          <span className=\"comment-action\">{dislikes}</span>\r\n      </span>\r\n        </Tooltip>,\r\n        <span key=\"comment-basic-reply-to\">Reply to</span>,\r\n    ];\r\n\r\n\r\n    return (\r\n        //old\r\n        // <div className={style.message}>{props.message}</div>\r\n        <Comment\r\n            actions={actions}\r\n            author={<a>Alex Gor</a>}\r\n            avatar={\r\n                userPhoto ? <Avatar src={userPhoto}/> : <Avatar src={userPhotos}/>\r\n            }\r\n            content={\r\n                <p>\r\n                    {props.message}\r\n                </p>\r\n            }\r\n        />\r\n    );\r\n}","import React from 'react';\r\nimport {DialogItem, DialogItemType} from \"./dialogItem/dialogItem\";\r\nimport {Message} from \"./message/message\";\r\nimport style from \"./dialogs.module.css\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {Textarea} from '../common/formsControls/FormsControls';\r\nimport {maxLengthCreator, required} from \"../../utils/validators/validators\";\r\nimport {Form} from 'antd';\r\n\r\nexport type MessagesType = {\r\n    id: string,\r\n    message: string\r\n}\r\n\r\ntype propsType = {\r\n    dialogsPage: {\r\n        dialogs: Array<DialogItemType>,\r\n        messages: Array<MessagesType>,\r\n        newMessageText: string\r\n    };\r\n    addMess: (value: string) => void;\r\n    isAuth: boolean;\r\n}\r\nconst maxLength30 = maxLengthCreator(30);\r\n\r\nconst Dialogs = (props: propsType) => {\r\n    const {addMess, dialogsPage} = props;\r\n\r\n    let dialogsElements = dialogsPage.dialogs.map(({name, id, url}) => <DialogItem name={name} id={id} key={id}\r\n                                                                                   url={url}/>);\r\n    let messagesElements = dialogsPage.messages.map(({id, message}) => <Message message={message} key={id}/>);\r\n\r\n    const onSubmit = (formData: FormDataType) => {\r\n        addMess(formData.newMessageBody);\r\n    }\r\n\r\n    return (\r\n        <div className={style.dialogs}>\r\n            <div className={style.dialogItems}>\r\n                {\r\n                    dialogsElements\r\n                }\r\n            </div>\r\n            <div className={style.messages}>\r\n                {\r\n                    messagesElements\r\n                }\r\n                <AddMessageFormRedux onSubmit={onSubmit}/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\ntype FormDataType = {\r\n    newMessageBody: string\r\n}\r\n\r\nexport const AddMessageForm: React.FC<InjectedFormProps<FormDataType>> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <Form.Item>\r\n                <Field name={'newMessageBody'} placeholder={'enter you message'} component={Textarea}\r\n                       validate={[required, maxLength30]}\r\n                />\r\n            </Form.Item>\r\n            <button>Add message</button>\r\n        </form>\r\n    );\r\n}\r\n\r\nconst AddMessageFormRedux = reduxForm<FormDataType>({form: 'dialogAddMessageForm'})(AddMessageForm);\r\n\r\nexport default Dialogs;","import {actions, DialogsReducerInitialStateType} from \"../../redux/dialogs-reducer\";\r\nimport Dialogs from \"./dialogs\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppRootState} from \"../../redux/redux-store\";\r\nimport {compose, Dispatch} from \"redux\";\r\n// import React from \"react\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport React from \"react\";\r\n\r\ntype MapStateToPropsType = {\r\n    dialogsPage: DialogsReducerInitialStateType;\r\n}\r\ntype MapDispatchToPropsType = {\r\n    addMess: (value: string) => void;\r\n}\r\n\r\nlet mapStateToProps = (state: AppRootState): MapStateToPropsType => {\r\n    return {\r\n        dialogsPage: state.dialogsPage\r\n    }\r\n}\r\nlet mapDispatchToProps = (dispatch: Dispatch): MapDispatchToPropsType => {\r\n    return {\r\n        addMess: (value: string) => {\r\n            dispatch(actions.addMessAC(value));\r\n        }\r\n    }\r\n}\r\n\r\n// const AuthRedirectComponent = withAuthRedirect(Dialogs);\r\n//\r\n// const DialogsContainer = connect<MapStateToPropsType, MapDispatchToPropsType, {}, AppRootState>(mapStateToProps, mapDispatchToProps)(AuthRedirectComponent);\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect<MapStateToPropsType, MapDispatchToPropsType, {}, AppRootState>(mapStateToProps, mapDispatchToProps),\r\n    withAuthRedirect\r\n)(Dialogs);"],"sourceRoot":""}